sentry:
  environment: staging

loaders:
  enabled: true
  storage:
    host: storage1.internal.staging.swh.network
    port: 5002
  amqp:
    host: scheduler0.internal.staging.swh.network
  deployments:
    # bzr:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.bzr.tasks.LoadBazaar
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.bzr
    # cvs:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.cvs.tasks.LoadCvsRepository
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.cvs
    git:
      requestedMemory: 256Mi
      requestedCpu: 200m
      queues:
        - swh.loader.git.tasks.UpdateGitRepository
        - swh.loader.git.tasks.LoadDiskGitRepository
        - swh.loader.git.tasks.UncompressAndLoadDiskGitRepository
      autoScaling:
        queueThreshold: 5  # spawn worker per increment of `value` messages
        minReplicacount: 1
        maxReplicaCount: 3
      sentrySwhPackage: swh.loader.git
    # maven:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.package.maven.tasks.LoadMaven
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.core
    # npm:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.package.npm.tasks.LoadNpm
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.core
    # pypi:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.package.pypi.tasks.LoadPyPI
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.core
    # svn:
    #   requestedMemory: 256Mi
    #   requestedCpu: 200m
    #   queues:
    #     - swh.loader.svn.tasks.LoadSvnRepository
    #     - swh.loader.svn.tasks.MountAndLoadSvnRepository
    #     - swh.loader.svn.tasks.DumpMountAndLoadSvnRepository
    #   autoScaling:
    #     queueThreshold: 10
    #     minReplicacount: 1
    #     maxReplicaCount: 3
    #   sentrySwhPackage: swh.loader.svn

graphql:
  enabled: true
  storageUrl: http://webapp.internal.staging.swh.network:5002/
  replicas: 1
  gunicorn:
    threads: 4
    Workers: 2
    timeout: 3600
  ingress:
    enabled: true
    httpPath: /
  logLevel: DEBUG


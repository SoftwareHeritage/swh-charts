namespace: swh

tmpEphemeralStorage:
  claimTemplate:
    ephemeral:
      volumeClaimTemplate:
        metadata:
          labels:
            type: ephemeral-volume
        spec:
          accessModes: [ "ReadWriteOnce" ]
          storageClassName: "local-path"
          resources:
            requests:
              storage: 100Gi # no effects

storage_replayer:
  maxMessagesBytes: "524288000"
  journalBrokers:
    # The name of the secret containing the BROKER_USER_PASSWORD value
    secretName: storage-replayer-broker-secret
  cassandra:
    keySpace: swh
    consistencyLevel: LOCAL_QUORUM
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: node-role.kubernetes.io/etcd
            operator: NotIn
            values:
            - "true"

cookers:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "swh/cooker"
            operator: In
            values:
            - "true"

loader_metadata:
  sentrySwhPackage: swh.loader.metadata
  requestedMemory: 350Mi
  requestedCpu: 80m

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "swh/loader-metadata"
            operator: In
            values:
            - "true"

indexers:
  sentrySwhPackage: swh.indexer
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "swh/indexer"
            operator: In
            values:
            - "true"

loaders:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "swh/loader"
            operator: In
            values:
            - "true"

listers:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "swh/lister"
            operator: In
            values:
            - "true"

graphql:
  sentry:
    enabled: true
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: swh/rpc
            operator: In
            values:
            - "true"

storage:
  sentry:
    enabled: true
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: swh/storage
            operator: In
            values:
            - "true"

web:
  sentry:
    enabled: true
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: swh/web
            operator: In
            values:
            - "true"

statsd_exporter:
  enabled: true

sentry:
  enabled: false
  environment: minikube

statsd_exporter:
  enabled: false

fakeRemoteSchedulerConfiguration:
  cls: remote
  host: fake-scheduler.i.s.s.n
  port: 5008

fakePostgresqlStorageConfiguration:
  cls: postgresql
  host: db1.i.s.s.n
  port: 5432
  user: swh
  password: test
  db: swh-storage

fakePostgresqlSchedulerConfiguration:
  cls: postgresql
  host: db1.i.s.s.n
  port: 5432
  user: swh
  password: test
  db: swh-scheduler

fakeRemoteStorageConfiguration:
  cls: remote
  host: http://fake-storage.i.s.s.n:8002

fakeRemoteStorageConfigurationRef:
  storageConfigurationRef: fakeRemoteStorageConfiguration

kafkaBrokers:
  - fakeBroker1
  - fakeBroker2

journalClientConfiguration:
  kafkaBrokersRef: kafkaBrokers
  groupId: swh.scheduler.journal_client

toolbox:
  enabled: true
  configs:
    scheduler: fakePostgresqlSchedulerConfiguration
    storage: fakePostgresqlSchedulerConfiguration

fakeCeleryConfiguration:
  host: fake-scheduler.i.s.s.n
  port: 5672
  user: fakeguest
  pass: fakeguest

scheduler:
  enabled: true
  schedulerConfigurationRef: fakeRemoteSchedulerConfiguration
  celeryConfigurationRef: fakeCeleryConfiguration
  recurrent:
    enabled: true
    schedulerPolicies:
      default:
      - policy: never_visited_oldest_update_first
        weight: 100
      opam:
      - policy: origins_without_last_update
        weight: 100
  rpc:
    enabled: true
    schedulerConfigurationRef: fakePostgresqlSchedulerConfiguration
    replicas: 1
    gunicorn:
      threads: 1
      workers: 1
      timeout: 10
    # autoScaling:
    #   minReplicaCount: 4
    #   maxReplicaCount: 20
    #   cpuPercentageUsage: 150
    # ingress:
    #   enabled: true
    #   host: myscheduler.domain
  updateMetrics:
    enabled: true
    logLevel: INFO
    # Execute at each minute
    cron: "0/10 * * * *"
  journalClient:
    enabled: true
    journalConfigurationRef: journalClientConfiguration
  extraServices:
    runner:
      enabled: true
      logLevel: INFO
      period: 100
    runner-priority:
      enabled: true
      logLevel: INFO
      period: 100
      extraConfig:
        - load-git
    listener:
      enabled: true
      logLevel: INFO

loader_metadata:
  enabled: true
  storageConfigurationRef: fakeRemoteStorageConfigurationRef
  schedulerConfigurationRef: fakeRemoteSchedulerConfiguration
  consumerGroup: loader_metadata.test.journal_client
  prefix: swh.test.journal.objects
  journalBrokers:
    hosts:
      - journal1.internal.s.s.n:4909
    secretName: swh-archive-broker-secret
    user: swh-test-archive-stg
  autoScaling:
    enabled: false

checker_deposit:
  enabled: true
  storageConfigurationRef: fakeRemoteStorageConfigurationRef
  deposit:
    host: deposit-rp.i.s.s.n
  amqp:
    host: scheduler0.i.s.s.n

cookers:
  enabled: true
  storageConfigurationRef: fakeRemoteStorageConfigurationRef
  vault:
    host: vault.i.s.s.n
    port: 5005
  amqp:
     host: scheduler0.i.s.s
  deployments:
    simple:
      queues:
        - swh.vault.cooking_tasks.SWHCookingTask

indexers:
  enabled: true
  storageConfigurationRef: fakeRemoteStorageConfigurationRef
  schedulerConfigurationRef: fakeRemoteSchedulerConfiguration
  indexer_storage:
    host: storage1.i.s.s.n
    port: 7005
  objstorage:
    host: storage1.i.s.s.n
    port: 3005
  journalBrokers:
    hosts:
      - journal1.internal.staging.swh.network:9094
    user: swh-archive-stg
  deployments:
    origin-intrinsic:
      indexer_type: origin_intrinsic_metadata
      consumerGroup: swh.test.indexer.journal_client.origin_intrinsic_metadata
      prefix: swh.test.journal.objects
      batch_size: 10
      extraConfig:
        tools:
          name: swh-metadata-detector
          version: 0.0.2
          configuration: {}

graphql:
  enabled: true
  storageConfigurationRef: fakeRemoteStorageConfigurationRef
  searchConfiguration:
    host: search0.i.s.s.n
    port: 5010
  debug: no
  introspection: no
  replicas: 1
  gunicorn:
    threads: 1
    workers: 2
    timeout: 100
  ingress:
    enabled: false
  auth:
    enabled: false
  maxRawContentSize: 10000

podPriority:
  enabled: true

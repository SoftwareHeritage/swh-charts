# Relay prometheus alerts to the admin cluster's ingress relay
alertmanagerConfig:
  enabled: true

svix:
  enabled: true
  version: v1.16
  ingress:
    host: svix-test.internal.staging.swh.network
    createTLS: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-production-gandi
      kubernetes.io/tls-acme: "true"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    whitelistSourceRange:
      # cluster internal range ip
      - 10.42.0.0/16
      - 10.43.0.0/16
      # staging ip
      - 192.168.130.0/24
      # admin ip
      - 192.168.50.0/24
      # VPN ip
      - 192.168.101.0/24
  requestedMemory: 100Mi
  requestedCpu: 100m
  namespace: svix-server
  postgres:
    enabled: true
    requestedMemory: 100Mi
    requestedCpu: 100m
    persistentVolume: false
  redis:
    # If false, the redis is not deployed through the chart but through
    # the k8s-cluster-config repository configuration
    managedByChart: false
    dsn: redis-svix-leader
    podSelectorPolicy:
      app: redis-svix-leader
  whitelistSubnets: "[10.42.0.0/16,10.43.0.0/16]"

podPriority:
  enabled: true
  priorities:
    # Note that each priority will be prefixed with its namespace (when declared in the
    # deployment). Because priority have a cluster-wide visibility (independently from
    # its namespace).
    system:
      range: 50000-100000
      value: 75000
      description: Highest pod priorities (ingress, operator, collector, controller)
    storages:
      range: 25000-26000
      value: 25500
      description: Backend storages used by other services (memcached, redis, ...)

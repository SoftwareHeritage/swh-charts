{{- if .Values.metallb.enabled -}}
{{- $clusterName :=
  required
    (print "Cluster name configuration key <.Values.clusterName> required")
    .Values.clusterName -}}
{{- $ipAddressPoolName := print $clusterName "-metallb-pool" -}}
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: l2-advertisement
  namespace: metallb
spec:
  ipAddressPools:
  - {{ $ipAddressPoolName }}
{{ end }}
